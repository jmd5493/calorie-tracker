{% extends "base.html" %}
{% block extrajs %}
<!-- You should place your js files here -->
<!-- e.g. <script src="/static/js/index.js"></script> -->
{% endblock%}
{% block title %}Page Title Here{% endblock %}
{% block content %}
<!-- content goes here -->

<div class="container" style="background-color:#87CEFA;">
  <br>
  <div class="row row-flex">

    <div class="col-sm-4">
      <div class="card text-center">
       <img src="{{ url_for('static', filename='images/snoopy.jpg') }}" alt="Profile" class="profile-img">
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card text-center">
        <div class="card-header">Profile Details</div>
        <p class="text-left"><strong>Name:</strong> John Doe</p>
        <p class="text-left"><strong>Age:</strong> 33</p>
        <p class="text-left"><strong>Weight:</strong> 170 lbs</p>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card text-center">
        <div class="card-header">Goal</div>
        <p class="text-left"><strong>Goal:</strong> Lose 10 lbs</p>
        <p class="text-left"><strong>Target Date:</strong> 2025-06-30</p>
        <p class="text-left"><strong>Days Left:</strong> 75</p>
      </div>
    </div>
  </div>
<br><br>

  <!-- Second Row: Chart -->
  <div class="row">
    <div class="col-sm-8">
      <div class="card">
        <div class="card-header">Progress Chart</div>
<!--        <canvas id="myChart" height="400" width="700">-->
          <!--Div that will hold the pie chart-->
          <div id="chart_div"></div>
<!--        </canvas>-->
      </div>
    </div>
    <br><br><br>
      <div class="col-sm-4">
      <button type="button" class="btn btn-primary" id="editGoal"
        style="background-color: white; color: black; margin-top: 15px;">
        Add/Edit my goal
      </button>
<!--        <div id="chart_div"></div>-->
      </div>
  </div>
</div>
    <script>
    $(document).ready(function (){
      document.getElementById('editGoal').addEventListener('click', function () {
            console.log("Add/Edit Goal button clicked!"); // Debugging log
            window.location.href = "/edit_goal";

        });
    });
  </script>
    <!-- If you want to use Google Chart, you need to import this library -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    console.log("Entered the chart code blcok");
    // array of json objects
    var classmate_data = [
      {
        'name'      : 'John',
        'shadow'    : 'no',
        'galic'     : 'no',
        'complexion': 'pale'
      },
      {
        'name'      : 'Lee',
        'shadow'    : 'yes',
        'galic'     : 'no',
        'complexion': 'pale'
      },
      {
        'name'      : 'Emma',
        'shadow'    : 'no',
        'galic'     : 'yes',
        'complexion': 'brown'
      },
      {
        'name'      : 'Ava',
        'shadow'    : 'yes',
        'galic'     : 'yes',
        'complexion': 'olive '
      },
      {
        'name'      : 'Alex',
        'shadow'    : 'no',
        'galic'     : 'no',
        'complexion': 'brown'
      },
    ]; // demo in console how to access each element
       // e.g. classmate_data[0]['name']

    // Load the Visualization API and the corechart package.
    google.charts.load('current', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {
      console.log("Entered the drawChart function");
      var data = new google.visualization.DataTable();

      // classmate_data_processing(data);
      // console.log( data);

      data.addColumn('string', 'Time');
      data.addColumn('number', 'Calorie Consumed');
      data.addColumn('number', 'Calorie Burned');

      data.addRows([
        ['Day 1', 3000, 2500],
        ['Day 2', 2800, 3000],
        ['Day 3', 3500, 3200],
        ['Day 4', 4200, 3100],
        ['Day 5', 2500, 3400],
        ['Day 3', 3500, 3500],
        ['Day 4', 3000, 3300],
        ['Day 5', 2500, 4000]
      ]);

      const options = {
        title: 'Calories consumed vs Calorie burned Over Time',
        curveType: 'function',
        legend: { position: 'bottom' },
        width: 600,
        height: 400
      };

      // Instantiate and draw our chart, passing in some options.
      // var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      console.log("Entered the drawChart function");
      chart.draw(data, options);
    }

     // model of MVC

    function classmate_data_processing(result_data){
      console.log("Entered the classmate_data_processing function");
      // this function process classmate data and create data table
      var num_human = 0;
      var num_vampire = 0;
      for (var i =  0; i <= classmate_data.length - 1; i++) {
        // logic based on shadow
        if(classmate_data[i]['shadow'] == 'no'){
          // num_vampire = num_vampire + 1;
          num_vampire ++;
        }
        else{
          num_human ++;
        }
      }
      // Create the data table.
      result_data.addColumn('string', 'Element');
      result_data.addColumn('number', 'Count');
      result_data.addRows([
        ['Human', num_human],
        ['Vampire', num_vampire]
      ]);
      console.log("Completed the classmate_data_processing function : "+num_human+num_vampire);

    }
  </script>
{% endblock %}
